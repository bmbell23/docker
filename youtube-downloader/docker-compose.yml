name: youtube-downloader

services:
  yt-dlp-web:
    container_name: yt-dlp-web
    image: marcobaobao/yt-dlp-webui:latest
    restart: unless-stopped
    ports:
      - "8998:3033"
    environment:
      # Download settings
      DOWNLOAD_PATH: /downloads

      # Authentication
      USERNAME: ${YT_DLP_USERNAME}
      PASSWORD: ${YT_DLP_PASSWORD}

    volumes:
      # Downloads go here
      - ${DOWNLOAD_LOCATION}:/downloads
      # Config/database
      - ${DATA_LOCATION}:/app/data
      # Config file for default settings
      - ./config.yml:/config/config.yml:ro

    logging:
      driver: "json-file"
      options:
        max-file: "10"
        max-size: "2m"

    # Resource limits
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 1G
        reservations:
          cpus: '0.5'
          memory: 256M

